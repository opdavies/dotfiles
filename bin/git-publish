#!/usr/bin/env php
<?php

$branchesToIgnore = ['develop', 'master', 'staging', 'production'];
$localBranch = exec('git rev-parse --abbrev-ref HEAD');

if (in_array($localBranch, $branchesToIgnore)) {
    print "Currently on ${localBranch}. Aborting.";

    exit(1);
}

if ($prefix = getenv('BRANCH_PREFIX')) {
    $remoteBranch = "{$prefix}-{$localBranch}";
} else {
    $remoteBranch = $localBranch;
}

exec("git push -u origin ${localBranch}:${remoteBranch}");
